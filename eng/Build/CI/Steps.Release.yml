# Note: Only the Release pipelines have sufficient permissions for pushing NuGet packages
parameters:
- name: project
  type: string
  default: ''
  
steps:
- task: DownloadPipelineArtifact@2
  displayName: 'Download Package'
  inputs:
    buildType: 'current'
    artifactName: 'pkg'
    targetPath: '$(Pipeline.Workspace)'

- task: UseDotNet@2
  displayName: 'Install .NET Core 3.x'
  inputs:
    packageType: 'sdk'
    version: '3.x'

- task: PowerShell@2
  displayName: 'Print Artifact Contents'
  inputs:
    targetType: 'inline'
    script: |
      $assemblies = @(Get-ChildItem -Path "$(Pipeline.Workspace)/pkg/" -Recurse)
      foreach ($file in $files)
      {
          Write-Output $file
      }
    pwsh: true

#- task: DotNetCoreCLI@2
#  displayName: 'Push to NuGet.org'
#  inputs:
#    command: 'push'
#    packagesToPush: '$(Pipeline.Workspace)/pkg/${{ parameters.Project }}*.nupkg'
#    nuGetFeedType: 'external'
#    publishFeedCredentials: 'NuGet.org Sweetener API Key'
